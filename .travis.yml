language: python
sudo: required
services:
  - docker
env:
    # Ref: https://hub.docker.com/r/_/fedora/
    # - CONTAINER_IMAGE=fedora:24
    # - CONTAINER_IMAGE=fedora:latest
    - CONTAINER_IMAGE=fedora:rawhide
before_install:
  - |
    if [ "x${CONTAINER_IMAGE}" != 'x' ]; then
        sed -i "/^FROM / s@fedora@${CONTAINER_IMAGE}@" Dockerfile
    fi
install:
  - |
    docker build \
        -t rpm \
        .
before_script:
  - sudo chown -R 1000 .
script:
  - |
    DIR=$(pwd)
    docker run \
        -v "${DIR}:${DIR}" \
        -w "${DIR}" \
        -i \
        -t rpm
